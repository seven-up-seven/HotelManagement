<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ContextMenu?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<BorderPane styleClass="root-pane" prefHeight="600.0" prefWidth="800.0"
            xmlns="http://javafx.com/javafx/23.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            stylesheets="@../assets/css/ModernHotelApp.css"
            fx:controller="com.example.frontendquanlikhachsan.controllers.MainController">

    <!-- Sidebar -->
    <left>
        <VBox styleClass="sidebar" prefWidth="280.0" spacing="10">
            <VBox styleClass="logo">
                <Label text="🏨 Hotel MS" styleClass="logo-title"/>
                <Label text="Management System" styleClass="logo-subtitle"/>
            </VBox>
            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
                <VBox spacing="5">
                    <Button text="🏠 Trang chủ" styleClass="nav-item" onAction="#openHomeTab">
                        <tooltip><Tooltip text="Trang chủ"/></tooltip>
                    </Button>
                    <Button fx:id="adminButton" text="👤 Quản trị viên" styleClass="nav-item">
                        <tooltip><Tooltip text="Quản trị viên"/></tooltip>
                        <contextMenu>
                            <ContextMenu fx:id="adminMenu" styleClass="context-menu">
                                <items>
                                    <MenuItem text="🔐 Quản lí tài khoản" onAction="#openAccountManagement"/>
                                    <MenuItem text="🧩 Quản lí vai trò" onAction="#openUserRoleManagement"/>
                                    <MenuItem text="📜 Quản lí lịch sử" onAction="#openHistoryManagement"/>
                                    <MenuItem text="⚙️ Quản lí tham số" onAction="#openVariableManagement"/>
                                </items>
                            </ContextMenu>
                        </contextMenu>
                    </Button>
                    <Button fx:id="receptionistButton" text="🛎 Lễ tân" styleClass="nav-item">
                        <tooltip><Tooltip text="Lễ tân"/></tooltip>
                        <contextMenu>
                            <ContextMenu fx:id="receptionistMenu" styleClass="context-menu">
                                <items>
                                    <MenuItem text="🛏 Lập phiếu thuê phòng" onAction="#openRoomRentingTab"/>
                                    <MenuItem text="➕ Bổ sung phiếu thuê" onAction="#openEditTab"/>
                                    <MenuItem text="🧾 Khởi tạo hóa đơn" onAction="#openRentalFormViewTab"/>
                                    <MenuItem text="📂 Tra cứu hóa đơn" onAction="#openInvoiceAccountantTab"/>
                                </items>
                            </ContextMenu>
                        </contextMenu>
                    </Button>
                    <Button fx:id="managerButton" text="📋 Quản lý" styleClass="nav-item">
                        <Tooltip text="Quản lý"></Tooltip>
                        <contextMenu>
                            <ContextMenu fx:id="managerMenu" styleClass="context-menu">
                                <items>
                                    <MenuItem text="👨‍💼 Quản lý nhân viên" onAction="#openStaffTab"/>
                                    <MenuItem text="🪪 Quản lý chức vụ" onAction="#openPositionTab"/>
                                    <MenuItem text="🙋‍♂️ Quản lý khách hàng" onAction="#openGuestTab"/>
                                    <MenuItem text="📑 Quản lý phiếu thuê" onAction="#openRentalFormTab"/>
                                    <MenuItem text="📃 Quản lý hóa đơn" onAction="#openInvoiceTab"/>
                                    <MenuItem text="🏨 Cấu trúc khách sạn" onAction="#openStructureTab"/>
                                    <MenuItem text="📅 Đặt phòng" onAction="#openBookingConfirmationFormTab"/>
                                    <MenuItem text="⏳ Gia hạn" onAction="#openRentalExtensionFormTab"/>
                                    <MenuItem text="🗺️ Sơ đồ khách sạn" onAction="#openMapTab"/>
                                </items>
                            </ContextMenu>
                        </contextMenu>
                    </Button>
                    <Button fx:id="accountantButton" text="💰 Kế toán" styleClass="nav-item">
                        <tooltip><Tooltip text="Kế toán"/></tooltip>
                        <contextMenu>
                            <ContextMenu fx:id="accountantMenu" styleClass="context-menu">
                                <items>
                                    <MenuItem text="📊 Báo cáo tháng" onAction="#openReportTab"/>
                                    <MenuItem text="🔍 Tra cứu hóa đơn" onAction="#openInvoiceAccountantTab"/>
                                    <MenuItem text="💸 Lương nhân viên" onAction="#openSalaryTab"/>
                                </items>
                            </ContextMenu>
                        </contextMenu>
                    </Button>
                    <Button text="🗺️ Sơ đồ khách sạn" styleClass="nav-item" onAction="#openMapTab">
                        <tooltip><Tooltip text="Sơ đồ khách sạn"/></tooltip>
                    </Button>
                    <Button text="🤖 Trợ lý AI" styleClass="nav-item" onAction="#openChatbot">
                        <tooltip><Tooltip text="Trợ lý AI"/></tooltip>
                    </Button>
                    <Button text="🚪 Đăng xuất" styleClass="nav-item" onAction="#logout">
                        <tooltip><Tooltip text="Đăng xuất"/></tooltip>
                    </Button>
                </VBox>
            </ScrollPane>
        </VBox>
    </left>

    <!-- Main Content -->
    <center>
        <VBox styleClass="flex-grow">
            <!-- Header -->
            <HBox styleClass="header" alignment="CENTER_LEFT" spacing="20">
                <VBox>
                    <Label text="Hệ thống quản lý khách sạn" styleClass="header-title"/>
                    <Label fx:id="userGreeting" text="Xin chào, [Vai trò] [Tên]" styleClass="header-info"/>
                </VBox>
                <HBox alignment="CENTER_RIGHT" spacing="20">
                    <VBox styleClass="clock-box">
                        <Label fx:id="clockLabel" text="00:00:00" styleClass="clock-time"/>
                        <Label fx:id="dateDayLabel" text="Ngày 01-01-2021 – Thứ hai" styleClass="clock-date"/>
                    </VBox>
                    <Label fx:id="userAvatar" text="A" styleClass="user-avatar"/>
                </HBox>
            </HBox>

            <!-- Tab Pane -->
            <TabPane fx:id="tabPane" styleClass="tab-pane" tabClosingPolicy="ALL_TABS" VBox.vgrow="ALWAYS"/>
        </VBox>
    </center>
</BorderPane>