<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.Tab?>

<BorderPane styleClass="root-pane" prefHeight="600.0" prefWidth="800.0"
            xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            stylesheets="@../assets/css/ModernHotelApp.css, @../assets/css/TabPane.css"
            fx:controller="com.example.frontendquanlikhachsan.controllers.MainController">

    <!-- Header Section -->
    <top>
        <HBox styleClass="header" alignment="CENTER_LEFT" spacing="10">
            <Button fx:id="toggleSidebarButton" text="â˜°" styleClass="toggle-button" onAction="#toggleSidebar"/>
            <Label text="ðŸ¨ Roomify" styleClass="logo-title"/>
            <Label text="Management System" styleClass="logo-subtitle" />
            <HBox alignment="CENTER_RIGHT" spacing="5" HBox.hgrow="ALWAYS">
                <VBox spacing="3" alignment="CENTER" styleClass="clock-box">
                    <Label fx:id="clockLabel" text="00:00:00" styleClass="clock-time"/>
                    <Label fx:id="dateDayLabel" text="NgÃ y 01-01-2021 â€“ Thá»© hai" styleClass="clock-date"/>
                </VBox>
            </HBox>
        </HBox>
    </top>

    <!-- Main Content Area -->
    <center>
        <StackPane styleClass="main-content">
            <!-- Tab Pane -->
            <TabPane fx:id="tabPane" styleClass="tab-pane" tabClosingPolicy="ALL_TABS" stylesheets="@../assets/css/TabPane.css"/>

            <!-- Overlay Pane -->
            <Pane fx:id="overlayPane" styleClass="overlay-pane" visible="false" onMouseClicked="#handleOverlayClick">
                <StackPane.alignment>
                    <Pos fx:constant="CENTER"/>
                </StackPane.alignment>
            </Pane>

            <!-- Sidebar Container (Overlay) -->
            <VBox fx:id="sidebarContainer" styleClass="sidebar-container" visible="false">
                <StackPane.alignment>
                    <Pos fx:constant="TOP_LEFT"/>
                </StackPane.alignment>

                <VBox styleClass="sidebar" prefWidth="280.0" spacing="10" VBox.vgrow="ALWAYS">
                    <VBox styleClass="logo">
                        <Label text="ðŸ¨ Roomify" styleClass="logo-title"/>
                        <Label text="Management System" styleClass="logo-subtitle"/>
                    </VBox>

                    <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" styleClass="sidebar-scroll" VBox.vgrow="ALWAYS">
                        <VBox spacing="5">
                            <!-- Trang chá»§ -->
                            <Button onAction="#openHomeTab" styleClass="nav-item">
                                <graphic>
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <StackPane prefWidth="32" prefHeight="32"
                                                   style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2); -fx-background-radius: 16;">
                                            <Label text="ðŸ " style="-fx-text-fill: white; -fx-font-size: 14;" />
                                        </StackPane>
                                        <Label text="Trang chá»§" style="-fx-font-weight: bold; -fx-text-fill: white;" />
                                    </HBox>
                                </graphic>
                                <tooltip><Tooltip text="Trang chá»§"/></tooltip>
                            </Button>

                            <!-- Quáº£n trá»‹ viÃªn -->
                            <Button fx:id="adminButton" styleClass="nav-item">
                                <graphic>
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <StackPane prefWidth="32" prefHeight="32"
                                                   style="-fx-background-color: linear-gradient(to right, #11998e, #38ef7d); -fx-background-radius: 16;">
                                            <Label text="ðŸ‘¤" style="-fx-text-fill: white; -fx-font-size: 14;" />
                                        </StackPane>
                                        <Label text="Quáº£n trá»‹ viÃªn" style="-fx-font-weight: bold; -fx-text-fill: white;" />
                                    </HBox>
                                </graphic>
                                <tooltip><Tooltip text="Quáº£n trá»‹ viÃªn"/></tooltip>
                                <contextMenu>
                                    <ContextMenu fx:id="adminMenu" styleClass="context-menu">
                                        <items>
                                            <MenuItem text="ðŸ” Quáº£n lÃ­ tÃ i khoáº£n" onAction="#openAccountManagement"/>
                                            <MenuItem text="ðŸ§© Quáº£n lÃ­ vai trÃ²" onAction="#openUserRoleManagement"/>
                                            <MenuItem text="ðŸ“œ Quáº£n lÃ­ lá»‹ch sá»­" onAction="#openHistoryManagement"/>
                                            <MenuItem text="âš™ï¸ Quáº£n lÃ­ tham sá»‘" onAction="#openVariableManagement"/>
                                        </items>
                                    </ContextMenu>
                                </contextMenu>
                            </Button>

                            <!-- Lá»… tÃ¢n -->
                            <Button fx:id="receptionistButton" styleClass="nav-item">
                                <graphic>
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <StackPane prefWidth="32" prefHeight="32"
                                                   style="-fx-background-color: linear-gradient(to right, #ff6b6b, #ffa726); -fx-background-radius: 16;">
                                            <Label text="ðŸ›Ž" style="-fx-text-fill: white; -fx-font-size: 14;" />
                                        </StackPane>
                                        <Label text="Lá»… tÃ¢n" style="-fx-font-weight: bold; -fx-text-fill: white;" />
                                    </HBox>
                                </graphic>
                                <tooltip><Tooltip text="Lá»… tÃ¢n"/></tooltip>
                                <contextMenu>
                                    <ContextMenu fx:id="receptionistMenu" styleClass="context-menu">
                                        <items>
                                            <MenuItem text="ðŸ› Láº­p phiáº¿u thuÃª phÃ²ng" onAction="#openRoomRentingTab"/>
                                            <MenuItem text="âž• Bá»• sung phiáº¿u thuÃª" onAction="#openEditTab"/>
                                            <MenuItem text="ðŸ§¾ Khá»Ÿi táº¡o hÃ³a Ä‘Æ¡n" onAction="#openRentalFormViewTab"/>
                                            <MenuItem text="ðŸ“‚ Tra cá»©u hÃ³a Ä‘Æ¡n" onAction="#openInvoiceAccountantTab"/>
                                        </items>
                                    </ContextMenu>
                                </contextMenu>
                            </Button>

                            <!-- Quáº£n lÃ½ -->
                            <Button fx:id="managerButton" styleClass="nav-item" style="-fx-pref-width: 150px;" >
                                <graphic>
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <StackPane prefWidth="32" prefHeight="32"
                                                   style="-fx-background-color: linear-gradient(to right, #ff9966, #ff5e62); -fx-background-radius: 16;">
                                            <Label text="ðŸ“‹" style="-fx-text-fill: white; -fx-font-size: 14;" />
                                        </StackPane>
                                        <Label text="Quáº£n lÃ½" style="-fx-font-weight: bold; -fx-text-fill: white;" />
                                    </HBox>
                                </graphic>
                                <Tooltip text="Quáº£n lÃ½"/>
                                <contextMenu>
                                    <ContextMenu fx:id="managerMenu" styleClass="context-menu">
                                        <items>
                                            <MenuItem text="ðŸ‘¨â€ðŸ’¼ Quáº£n lÃ½ nhÃ¢n viÃªn" onAction="#openStaffTab"/>
                                            <MenuItem text="ðŸªª Quáº£n lÃ½ chá»©c vá»¥" onAction="#openPositionTab"/>
                                            <MenuItem text="ðŸ™‹â€â™‚ï¸ Quáº£n lÃ½ khÃ¡ch hÃ ng" onAction="#openGuestTab"/>
                                            <MenuItem text="ðŸ“‘ Quáº£n lÃ½ phiáº¿u thuÃª" onAction="#openRentalFormTab"/>
                                            <MenuItem text="ðŸ“ƒ Quáº£n lÃ½ hÃ³a Ä‘Æ¡n" onAction="#openInvoiceTab"/>
                                            <MenuItem text="ðŸ¨ Cáº¥u trÃºc khÃ¡ch sáº¡n" onAction="#openStructureTab"/>
                                            <MenuItem text="ðŸ“… Äáº·t phÃ²ng" onAction="#openBookingConfirmationFormTab"/>
                                            <MenuItem text="â³ Gia háº¡n" onAction="#openRentalExtensionFormTab"/>
                                            <MenuItem text="ðŸ—ºï¸ SÆ¡ Ä‘á»“ khÃ¡ch sáº¡n" onAction="#openMapTab"/>
                                        </items>
                                    </ContextMenu>
                                </contextMenu>
                            </Button>

                            <!-- Káº¿ toÃ¡n -->
                            <Button fx:id="accountantButton" styleClass="nav-item">
                                <graphic>
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <StackPane prefWidth="32" prefHeight="32"
                                                   style="-fx-background-color: linear-gradient(to right, #a8edea, #fed6e3); -fx-background-radius: 16;">
                                            <Label text="ðŸ’°" style="-fx-text-fill: white; -fx-font-size: 14;" />
                                        </StackPane>
                                        <Label text="Káº¿ toÃ¡n" style="-fx-font-weight: bold; -fx-text-fill: white;" />
                                    </HBox>
                                </graphic>
                                <tooltip><Tooltip text="Káº¿ toÃ¡n"/></tooltip>
                                <contextMenu>
                                    <ContextMenu fx:id="accountantMenu" styleClass="context-menu">
                                        <items>
                                            <MenuItem text="ðŸ“Š BÃ¡o cÃ¡o thÃ¡ng" onAction="#openReportTab"/>
                                            <MenuItem text="ðŸ” Tra cá»©u hÃ³a Ä‘Æ¡n" onAction="#openInvoiceAccountantTab"/>
                                            <MenuItem text="ðŸ’¸ LÆ°Æ¡ng nhÃ¢n viÃªn" onAction="#openSalaryTab"/>
                                        </items>
                                    </ContextMenu>
                                </contextMenu>
                            </Button>

                            <!-- Trá»£ lÃ½ AI -->
                            <Button onAction="#openChatbot" styleClass="nav-item">
                                <graphic>
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <StackPane prefWidth="32" prefHeight="32"
                                                   style="-fx-background-color: linear-gradient(to right, #00c6ff, #0072ff); -fx-background-radius: 16;">
                                            <Label text="ðŸ¤–" style="-fx-text-fill: white; -fx-font-size: 14;" />
                                        </StackPane>
                                        <Label text="Trá»£ lÃ½ AI" style="-fx-font-weight: bold; -fx-text-fill: white;" />
                                    </HBox>
                                </graphic>
                                <tooltip><Tooltip text="Trá»£ lÃ½ AI"/></tooltip>
                            </Button>

                            <!-- CÃ i Ä‘áº·t -->
                            <Button onAction="#openSettings" styleClass="nav-item">
                                <graphic>
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <StackPane prefWidth="32" prefHeight="32"
                                                   style="-fx-background-color: linear-gradient(to right, #bdc3c7, #2c3e50); -fx-background-radius: 16;">
                                            <Label text="âš™" style="-fx-text-fill: white; -fx-font-size: 14;" />
                                        </StackPane>
                                        <Label text="CÃ i Ä‘áº·t" style="-fx-font-weight: bold; -fx-text-fill: white;" />
                                    </HBox>
                                </graphic>
                                <tooltip><Tooltip text="CÃ i Ä‘áº·t"/></tooltip>
                            </Button>

                            <!-- ÄÄƒng xuáº¥t -->
                            <Button onAction="#logout" styleClass="nav-item">
                                <graphic>
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <StackPane prefWidth="32" prefHeight="32"
                                                   style="-fx-background-color: linear-gradient(to right, #ee0979, #ff6a00); -fx-background-radius: 16;">
                                            <Label text="ðŸšª" style="-fx-text-fill: white; -fx-font-size: 14;" />
                                        </StackPane>
                                        <Label text="ÄÄƒng xuáº¥t" style="-fx-font-weight: bold; -fx-text-fill: white;" />
                                    </HBox>
                                </graphic>
                                <tooltip><Tooltip text="ÄÄƒng xuáº¥t"/></tooltip>
                            </Button>
                        </VBox>
                    </ScrollPane>
                </VBox>
            </VBox>
        </StackPane>
    </center>

</BorderPane>